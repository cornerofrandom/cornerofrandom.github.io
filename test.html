<!DOCTYPE html>
<html>
<body>

<div contenteditable="true" id="print">edit me</div>

<div id="result">not edited yet.</div>

<script>
function storageAvailable(type) {
    var storage;
    try {
        storage = window[type];
        var x = "__storage_test__";
        storage.setItem(x, x);
        storage.removeItem(x);
        return true;
    }
    catch (e) {
        return e instanceof DOMException && (e.code === 22 || e.code === 1014 || e.name === "QuotaExceededError" || e.name === "NS_ERROR_DOM_QUOTA_REACHED") && (storage && storage.length !== 0);
    }
}

//editableDiv = document.getElementById("edited"); // get the editable div
editableDiv = document.getElementById("print"); // get the editable div

editableDiv.addEventListener("change", function() { // this function will be executed whenever the content of the editableDiv changes
    if (storageAvailable("localStorage")) { // check for storage availability
        divcontent = editableDiv.innerHTML; // get contents of the editableDiv
        window.localStorage.setItem("divcontent", divcontent); // add them to the localStorage
    } else { // if localStorage is not supported, notify the user about it
        alert("Your browser does not support localStorage or you disabled it, the things you entered could not be saved !");
    }
});

editableDiv = document.getElementById("print"); // get the editable div


window.addEventListener("load", function() { // this function is executed whenever the page is loaded
    if (storageAvailable("localStorage")) { // check for storage availability
        divcontent = window.localStorage.getItem("divcontent"); // get the saved divcontent
        if (divcontent === null) { // if the user never modified the divcontent before (or cleaned his localStorage), do nothing
        } else {
            editableDiv.innerHTML = divcontent; // write it into the editableDiv
        }
    } else { // if strorage not available, notify the user
        alert("Your browser does not support localStorage or you disabled it, your previous work could not be restored !");
    }
});
</script>

</body>
</html>
